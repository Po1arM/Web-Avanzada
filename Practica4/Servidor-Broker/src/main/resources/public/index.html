<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Ejemplo Cliente de WebSocket</title>
        <script src="/webjars/jquery/jquery.min.js"></script>
        <script src="/webjars/sockjs-client/sockjs.min.js"></script>
        <script src="/webjars/stomp-websocket/stomp.min.js"></script>
        <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

        <script type="text/javascript">
            var stompClient = null

            function connect() {
                var socket = new SockJS('/ws-socket')
                stompClient = Stomp.over(socket)
                stompClient.connect({}, function (frame) {
                    console.log('Conectado: ' + frame)
                    stompClient.subscribe('/topic/grafico', function (string) {
                        console.log('Llego miop')
                        console.log(JSON.parse(string.body))
                        //generarGrafico(jSON.parse(jsonObject.body).content)
                    })
                })
            }
            function sendSomething() {
                stompClient.send("/app/ws", {}, JSON.stringify('Co√±azo, manda algo'));
            }

            function generarGrafico(datos){

            }

        </script>
    </head>

    <body>

    <input type = "button" onclick = "connect()" value = "Conectar">
    <input type = "button" onclick = "sendSomething()" value = "Enviar">

    </body>
</html>